# 渲染循环

现在您已经了解了系统的主要组成部分，让我们看看这些部分是如何协同工作将您的项目显示在屏幕上的。与网页不同，PixiJS在不断更新和重新绘制自身，一次又一次。您更新您的对象，然后PixiJS将它们渲染到屏幕上，然后循环重复。我们称这个周期为渲染循环。

任何PixiJS项目的大部分内容都包含在这个更新+渲染循环中。您编写更新代码，PixiJS负责渲染。

让我们逐帧介绍渲染循环中发生的三个主要步骤。

<!--（待办事项：这个指南还未完成。我需要核心团队的反馈，了解在这里放什么内容，以及对底层发生的事情有什么具体的解释。）-->

## 运行Ticker回调

第一步是计算上一帧到当前帧经过的时间，并调用Application对象的ticker回调并传入该时间差。这使得项目的代码可以在舞台上动画和更新精灵等内容，为渲染做准备。

## 更新场景图

我们在下一节将详细讨论场景图是什么以及由什么组成，但目前您只需知道它包含了您绘制的内容 - 如精灵、文本等 - 并且这些对象在一个类似树状的层次结构中。在通过移动、旋转等方式更新游戏对象后，PixiJS需要计算场景中每个对象的新位置和状态，然后才能开始绘制。

<!--（待办事项：这是真的吗？我理解是在渲染过程之前有一个变换/状态更新，但在代码中找不到它。）-->

## 渲染场景图

现在我们的游戏状态已经更新，是时候将其绘制到屏幕上了。渲染系统从场景图的根节点（`app.stage`）开始，然后逐个渲染每个对象及其子对象，直到所有对象都被绘制完成。此过程中没有内置裁剪或其他智能优化。如果您的舞台上有很多超出可见范围的对象，您可以考虑禁用它们以进行优化。

## 帧率

关于帧率的说明。渲染循环无法无限制地运行 - 绘制内容到屏幕需要时间。此外，帧率不应超过每次屏幕更新一次（通常为60fps，但较新的显示器支持144fps或更高）。最后，PixiJS运行在类似Chrome或Firefox的Web浏览器上。浏览器本身必须平衡各种内部操作的需求以及为任何打开的标签提供服务。所有这些都意味着确定何时绘制帧是一个复杂的问题。

<!--对于大多数项目，您可以使用Ticker对象的默认设置，这将...（待办事项：如果不设置最小/最大FPS，文档有点不清楚 - 确认一下）-->

在某些情况下，如果您希望调整该行为，您可以在Ticker上设置`minFPS`和`maxFPS`属性，以向PixiJS提供有关所需支持的tick速度范围的提示。只需注意，由于复杂的环境，您的项目不能_保证_特定的FPS。在ticker回调中使用传递的`delta`值来调整任何动画，以确保平滑播放。

## 自定义渲染循环

刚才介绍的是由Application辅助类提供的默认渲染循环。还有许多其他创建渲染循环的方法，可能对于希望解决特定问题的高级用户有所帮助。<!--您可以在[自定义渲染循环指南](TODO：在此处添加链接)中阅读更多相关信息。-->在您进行原型设计和学习PixiJS时，建议采用Application提供的系统。
